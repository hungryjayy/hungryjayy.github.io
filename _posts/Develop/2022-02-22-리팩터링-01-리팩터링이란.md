---
layout: post
title: 리팩터링 1. 리팩터링이란
author: 
  name: hungryjayy
  link: https://github.com/hungryjayy
description: null
tags: [develop, refactoring]
featuredImage: 
img: 
categories: [Develop]
date: '2022-02-22'
extensions:
  preset: gfm
---

: 겉으로 드러나는 기능은 그대로 두고, 내부 구조를 개선하는 것.

<br>

* 공학 설계의 관점에서 **설계**를 한 후 **기능**을 만드는 것이 일반적이지만, 리팩토링의 관점에서는 **기능**을 만든 후, **설계**를 좋은 구조로 정리해 **이해하기 쉽고 변화에 유연하게** 만드는 작업이다.

<br>

## 코드 리팩터링을 위한 작업

* **테스트 작성**: 신뢰성 측면에서, 이전과 같은 기능을 수행하는지 테스트를 통해 변경한 코드에 휴먼에러가 없는지 확인한다.
* **형상관리**: 변경(리팩터링)때마다 커밋을 하면 변화를 추적하기 편하고, 혹시 모를 상황에 롤백 할 수 있다.

<br>

## 다양한 리팩토링 방법

* 함수 추출하기

  * 함수 추출하기 단축키: Intellij에서 `option` + `command` + `M` 

* 네이밍을 더 명확하게 변경하기

* 임시 변수를 질의 함수로 바꾸기 (변수를 함수화하기)

  ```java
  public foo() {
    // ..
  	int total = prices[priceId] * amount; // 아래로 리팩토링
  }
  
  // ----------------------------
  
  public foo() {
    int total = getTotal(priceId);
  }
  
  public getTotal(int priceId) {
    return prices[priceId] * amount;
  }
  ```

  * 지역변수를 객체의 메서드로 만들면 좋아질 때가 많다.

* 인라인하기: 변수 이름이 우변의 표현식과 다를 바가 없을 때 선언을 제거하기.

* 함수 선언 바꾸기: 이름, 시그니처

* 문장 슬라이드하기: 관련 코드를 한 곳으로 뭉치기. 관련 코드가 한 군데 모아져있으면 **임시 변수를 질의 함수로 바꾸기**가 수월해진다.

<Br>

### 성능 저하와 리팩토링

* 
* **인라인 하기**: 리팩터링에서는 재사용이 있더라도 변수 값이 바뀌지 않는 경우 인라인하기를 예시로 든다.
* 관련 코드를 한군데로 뭉치기 위해 중첩문을 나누었을 때 