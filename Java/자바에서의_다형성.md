# 자바에서의 다형성

: 여러가지 형태를 가질 수 있는 능력

* 상속과 함께 객체지향의 가장 중요한 특징 중 하나
* **자바에서는 한 타입의 참조변수로 여러 타입의 객체를 참조할 수 있도록 했다.**

<br>

## 참조변수와 형변환

```java
class Tv {
  boolean power;
  // ...
}

class CaptionTv extends Tv {
  String text;
  void caption() { /* */ }
}

CaptionTv c = new CaptionTv();
Tv t = new CaptionTv(); // A

CaptionTv c = new Tv(); // B
```

* A에서 **부모 참조변수 타입**을 갖는 t는 자식 클래스 `CaptionTv`에만 존재하는 멤버를 사용 할 수 없다. B의 경우  자식 클래스를 **참조변수 타입**으로 갖게 했고, 이 경우 **실제 인스턴스**인 부모 클래스에 없는 멤버에 접근하려 할 수 있기 때문에 컴파일 에러가 발생한다.
* **멤버변수**의 경우 (부모와 자식 클래스에 중복된 경우에) **참조변수의 타입**의 변수를 따른다. (위의 A의 경우 t로 정의한 객체의 멤버변수를 따른다.)

<br>

### 자바에서의 형변환?

* 업캐스팅: **자손타입 -> 조상타입 인스턴스** : 형변환 생략 가능

* 다운캐스팅: **조상타입 -> 자손타입 인스턴스** : 형변환 생략 불가

  ```java
  Tv t = new CaptionTv();
  // 아래와 같다.
  CaptionTv c = new CaptionTv();
  Tv t = (Tv)c;
  ```

* 형변환은 참조변수의 타입을 변환하는 것이다. 따라서, **인스턴스에는 아무런 영향이 없다. 다만, 참조하고 있는 인스턴스에서 사용할 수 있는 멤버의 범위(개수)를 조절해 다형성을 얻을 수 있다.**

<br>

#### Instanceof

* 인스턴스의 타입을 알기 위한 연산자

  ```java
  CaptionTv c = new CaptionTv();
  if(c instanceof Tv) { /* */ } // true
  if(c instanceOf Object) { /* */ } // true
  ```

* **Object**: 자바에서 모든 클래스의 조상 클래스. `toString(), equals()`와 같은 메소드 제공

<br>

## 다형성

```java
Product p[] = new Product[3];
p[0] = new Tv();
p[1] = new Computer();
p[2] = new Audio();
```

* 위의 배열 `p` loop를 돌면서 무언가를 수행하면 **중복된 메소드 대해서는 자식의 메소드**를 수행한다. **중복된 멤버변수의 경우 부모가 가진 멤버 변수**를 참조한다.