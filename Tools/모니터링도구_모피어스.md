# 모니터링 도구: 모피어스(Morpheus)

: 서버 & 애플리케이션 모니터링 서비스

<br>

* smith가 데몬으로 떠서 모니터링 정보를 수집하고, 사용자가 정의한 조건 만족시 알람을 쏘거나 차트를 그려주는 방식
* CPU, Swap, Disk I/O, 네트워크 사용량, tcp connection 등 많은 정보 확인 가능
* HTTP 기반, JMX, Client 기반 모니터링 방식이 있다. 사용방식은 다 같다. 2차인증 후 application 탭 -> test
* 그라파나 대시보드도 구성 가능

<br>

## 종류

### HTTP 기반

: 스미스가 직접 http 서비스 포트로 접근

* Nginx, Apache, 엘라스틱서치 있다.

<br>

### JMX 기반

: 스미스가 외부 서비스(jolokia)를 경유해 서버에 접근

* jolokia: JMX를 http로 접근할 수 있게 해주는 오픈소스
* 가장 많이 사용되는 방식
* Tomcat, JVM, kafka

<br>

##### JMX: Java Management eXtensions. 모니터링을 제공하는 자바 API

<br>

### client 기반

: target 서버의 cli를 통해(redis-cli)

* redis

<br>

## 커스텀 모니터링

: smith가 할 미션을 만든다. (미션 = script + 스케줄 + 컨디션)

* 스크립트: 수행할 action
* 스케줄: 수행할 주기 (e.g. every 1 minute)
* 컨디션: 체크될 조건 (count > 1000)

<br>

##### 대시보드, 호스트그룹, 일괄 처리, 에이전트 상태체크, 알람 정지 등 유용한 기능들이 많다.

<br>

#### Reference) 카카오 사내 기술학습 - 카카오 표준 모니터링 시스템 Morpheus

